<div *ngIf="!showSuccess" class="w-full h-full bg-pattern flex flex-col items-center justify-center p-4">
  <div [@fadeInUp] class="card overflow-hidden w-full sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto border border-primary-500">
    <div class="p-4 sm:p-6 pb-0 flex flex-col items-center justify-center">
      <div class="fill-current text-center">
        <img class="w-36 sm:w-36" src="assets/img/logo/logo.png" />
      </div>
    </div>

    <div class="text-center mt-2 sm:mt-4">
      <h2 class="title m-0 text-xl sm:text-2xl">Réinitialiser le mot de passe</h2>
      <h4 class="body-2 text-secondary m-0 text-sm sm:text-base">
        Saisissez votre adresse email pour récupérer votre mot de passe.
      </h4>
    </div>

    <div [formGroup]="form" class="p-4 sm:p-6 flex flex-col gap-3 sm:gap-4">
      <div class="flex flex-col">
        <mat-form-field class="flex-1">
          <mat-label>Adresse Email</mat-label>
          <mat-icon class="mr-2" matIconPrefix svgIcon="mat:mail"></mat-icon>
          <input formControlName="email" matInput required />
          <mat-error *ngIf="form.controls.email.hasError('required')">
          </mat-error>
        </mat-form-field>

        <div *ngIf="form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)"
          class="text-red-500 font-medium text-xs sm:text-sm relative -mt-3">
          <div *ngIf="form.controls['email'].errors?.['required']">
            L'email est obligatoire
          </div>
          <div *ngIf="form.controls['email'].errors?.['pattern']">
            L'email n'est pas valide
          </div>
        </div>
      </div>

      <button (click)="send()" color="primary" mat-raised-button type="button" [disabled]="form.invalid || isSubmitting"
        class="mt-2 sm:mt-4">
        <mat-icon svgIcon="mat:check_circle" *ngIf="!isSubmitting" class="mr-1"></mat-icon>
        <mat-icon *ngIf="isSubmitting" class="m-2">
          <mat-spinner diameter="18"></mat-spinner>
        </mat-icon>
        ENVOYER LE LIEN DE RÉCUPÉRATION
      </button>
    </div>
  </div>
</div>



<div *ngIf="showSuccess" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
  <div class="text-center">
    <mat-icon svgIcon="mat:check_circle" class="text-green-500 text-7xl"></mat-icon>
    <h2 class="text-2xl font-bold mt-4">{{messageSuccess}}</h2>
    <p class="text-gray-600 mt-2">Retourner à la page de connexion...</p>
    <button mat-flat-button color="primary" class="mt-4" (click)="goToLogin()">
      <mat-icon svgIcon="mat:dashboard" class="mr-2"></mat-icon>
      Page de connexion
    </button>
  </div>
</div>
